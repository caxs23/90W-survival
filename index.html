<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>90ë³‘ë™ í…ìŠ¤íŠ¸ ì–´ë“œë²¤ì²˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f172a;
            --card-color: #1e293b;
            --accent-color: #334155;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Pretendard', sans-serif;
            overflow: hidden; /* ë°”ê¹¥ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }

        /* í•µì‹¬: Dynamic Viewport Height ì‚¬ìš© */
        .game-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100vh;
            height: 100dvh; 
        }

        .game-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            background: var(--card-color);
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }

        /* ìƒë‹¨ ìƒíƒœë°” */
        .header {
            flex-shrink: 0;
            padding: env(safe-area-inset-top, 1rem) 1.5rem 0.75rem 1.5rem;
            background: var(--bg-color);
            border-bottom: 1px solid var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .mental-icons {
            font-size: 1.25rem;
            letter-spacing: 0.1rem;
        }

        /* í…ìŠ¤íŠ¸ ì˜ì—­: ê°€ë³€ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ë˜ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            -webkit-overflow-scrolling: touch;
        }

        /* ì„ íƒì§€ ì˜ì—­: í•˜ë‹¨ì— ê³ ì • */
        .footer {
            flex-shrink: 0;
            padding: 1rem 1.5rem calc(env(safe-area-inset-bottom, 1rem) + 1rem) 1.5rem;
            background: var(--card-color);
            border-top: 1px solid var(--accent-color);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .choice-btn {
            width: 100%;
            background: var(--accent-color);
            border: 1px solid #475569;
            padding: 1rem;
            border-radius: 0.75rem;
            text-align: left;
            font-size: 0.95rem;
            color: var(--text-main);
            transition: transform 0.1s, background 0.2s;
            animation: slideUp 0.4s ease-out forwards;
            opacity: 0;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .choice-btn:active {
            transform: scale(0.98);
            background: #475569;
        }

        .scene-title {
            font-size: 0.75rem;
            color: var(--text-dim);
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .dialogue {
            line-height: 1.75;
            font-size: 1.05rem;
            white-space: pre-wrap;
            word-break: keep-all;
        }

        .typing-cursor::after {
            content: 'â–Š';
            display: inline-block;
            margin-left: 2px;
            animation: blink 0.8s infinite;
            color: var(--text-dim);
        }

        @keyframes blink { 50% { opacity: 0; } }

        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        .main-content::-webkit-scrollbar { width: 4px; }
        .main-content::-webkit-scrollbar-track { background: transparent; }
        .main-content::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 10px; }
    </style>
</head>
<body>

<div class="game-wrapper">
    <div class="game-container">
        <!-- í—¤ë” -->
        <header class="header">
            <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Mental</span>
            <div id="mentalIcons" class="mental-icons"></div>
        </header>
        
        <!-- í…ìŠ¤íŠ¸ ì¶œë ¥ì°½ -->
        <main class="main-content" id="mainContent">
            <div id="textDisplay"></div>
        </main>

        <!-- ì„ íƒì§€ì°½ -->
        <footer class="footer" id="choiceContainer">
            <!-- ë²„íŠ¼ ì‚½ì… ìœ„ì¹˜ -->
        </footer>
    </div>
</div>

<script>
    const gameData = {
        'intro': {
            title: 'INTRO',
            text: `ì„¸ìƒì—” ì´í•´í•  ìˆ˜ ì—†ëŠ” ì‚¬ëŒë“¤ì´ ì°¸ ë§ì€ ê²ƒ ê°™ë‹¤.\nê°€ì¥ ìŠ¬í”ˆ ê±´, ë‚´ê°€ ì¼í•˜ëŠ” 90ë³‘ë™ì— ì œì¼ ë§ë‹¤ëŠ” ê±°ë‹¤.\nì˜¤ëŠ˜ë„ ì´ìƒí•œ ë§ë“¤ì„ ë¬´ì‚¬íˆ í˜ë ¤ë³´ë‚´ê³  í‡´ê·¼í•  ìˆ˜ ìˆì„ê¹Œ?`,
            choices: [{ text: '1. ë³‘ë™ìœ¼ë¡œ ì¶œê·¼í•œë‹¤.', next: 'scene1' }]
        },
        'scene1': {
            title: 'SCENE 01',
            text: `"ì•ˆë…•í•˜ì„¸ìš”~"\nì§§ì€ ì¸ì‚¬ë¥¼ í•˜ê³  ìë¦¬ì— ì•‰ëŠ”ë‹¤.\nì¸ê³„ë¥¼ ë°”ì‚ ë§ˆì¹˜ê³  ì•„ì¹¨ì•½ì„ ë³´ë ¤ëŠ”ë°, ìŠ¤í…Œì´ì…˜ ì•ìœ¼ë¡œ ë³´í˜¸ì‚¬ë‹˜ğŸ‘“ì´ ë‚˜íƒ€ë‚œë‹¤.\n\n"ì•„-í•˜ğŸµ"\në¶ˆê¸¸í•œ íŒ”ë™ì‘ì„ í•˜ë©° ê±¸ì–´ì˜¤ì‹ ë‹¤.\n"ì°¸ğŸŸì¹˜ ë¨¹ìœ¼ëŸ¬ ê°‘ì‹œë‹¤!ğŸµ"\n\në„ëŒ€ì²´ ë¬´ìŠ¨ ë§ì”€ì„ í•˜ì‹œë ¤ëŠ” ê±¸ê¹Œ..\nì°¸ì¹˜ íšŒë¥¼ ë§ì”€í•˜ì‹œëŠ” ê±¸ê¹Œ. ì‹ì‚¬ ì•½ì†ì„ ì¡ìœ¼ì‹œë ¤ëŠ” ê±¸ê¹Œ.`,
            choices: [
                { text: '1. ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ë³¸ë‹¤.', next: 'scene1_1' },
                { text: '2. ì ë‹¹íˆ ë‘˜ëŸ¬ëŒ„ë‹¤.', next: 'scene1_2' }
            ]
        },
        'scene1_1': {
            title: 'SCENE 01-1',
            text: `"ì°¸ì¹˜ìš”~? ê°‘ìê¸° ì™  ì°¸ì¹˜ì˜ˆìš”?"\n\n"ì˜¤ëŠ˜ ì ì‹¬ì´! ì°¸ì¹˜ë§ˆìš” ë®ë°¥ì´ì˜ˆìš”! í•³í•³í•³! ğŸ˜"\n\n'ë³´í˜¸ì‚¬ë‹˜ì€ ì™œ ì €ëŸ° ë†ë‹´ì„ í•˜ì‹¤ê¹Œ..'\n\në„ˆë¬´ ì–´ì´ì—†ëŠ” ë†ë‹´ì— ì •ì‹ ì´ ì•„ë“í•´ì§„ë‹¤.ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 2ë¡œ í–¥í•œë‹¤.)', next: 'scene2' }]
        },
        'scene1_2': {
            title: 'SCENE 01-2',
            text: `"ì œê°€ ì°¸ì¹˜ë¥¼ ëª» ë¨¹ì–´ìš” ë³´í˜¸ì‚¬ë‹˜."\n\n"ì•„, ê·¸ë˜ìš”? ì ì‹¬ ë©”ë‰´ê°€ ë‚˜ì™€ì„œ ê·¸ëŸ°ê±´ë°.."\n\në³´í˜¸ì‚¬ë‹˜ì€ ë©‹ì©ê²Œ ìë¦¬ë¡œ ëŒì•„ê°”ë‹¤.\nì–´ì´ì—†ëŠ” ë§ì„ ë“£ì§€ ì•Šì•„ì„œ ë‹¤í–‰ì´ì•¼.ğŸ˜Š`,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 2ë¡œ í–¥í•œë‹¤.)', next: 'scene2' }]
        },
        'scene2': {
            title: 'SCENE 02',
            text: `ìë¦¬ì— ì•‰ì•„ìˆë˜ ë³´í˜¸ì‚¬ë‹˜ì€, BíŒ€ ì„ ìƒë‹˜ì´ ìë¦¬ë¥¼ ë¹„ìš´ ì‚¬ì´ ì»´í“¨í„°ì— ì•‰ì•˜ë‹¤.\n\n"ì´ë²ˆì—ìš”, í˜„ëŒ€ë°”ì´ì˜¤ì—ì„œ 2ìƒì— ë“¤ì–´ê°„ê²Œ ìˆëŠ”ë°, ì´ë²ˆì—ëŠ” ì§„ì§œ ìœ ë ¥í•˜ê±°ë“ ìš”. ê·¼ë° ë¬¸ì œê°€ ìˆì–´."\n\nëŠ˜ í•˜ì‹œë˜ ì£¼ì‹ì–˜ê¸°ì¸ë°, ë­ê°€ ìœ ë ¥í•˜ë‹¤ëŠ” ê±¸ê¹Œ?\nê·¼ë° ì•„ê¹Œ ë†ë‹´ë„ ëª» ë°›ì•„ë“œë ¸ëŠ”ë°.. ë“¤ì–´ë³¼ê¹Œ?`,
            choices: [
                { text: '1. ì•„ëƒ. ê·¸ë˜ë„ ì ë‹¹íˆ ëŠì.', next: 'scene2_1' },
                { text: '2. ì‹¬ì‹¬í•´ í•˜ì‹œëŠ” ê²ƒ ê°™ì€ë° ë“¤ì–´ë“œë¦´ê¹Œ?', next: 'scene2_2' }
            ]
        },
        'scene2_1': {
            title: 'SCENE 02-1',
            text: `"ë³´í˜¸ì‚¬ë‹˜ ê·¼ë° ìƒ¤ì›Œì¥ ì—¬ì…¨ì–´ìš”?"\n\n"ì•„ì´ì¿ , ê·¸ê±¸ ê¹œë¹¡í–ˆë„¤. í•³í•³. ğŸ˜"\n\në³´í˜¸ì‚¬ë‹˜ì´ í™©ê¸‰íˆ ìƒ¤ì›Œì¥ìœ¼ë¡œ í–¥í•œë‹¤.ğŸƒâ€â™‚ï¸`,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 3ìœ¼ë¡œ í–¥í•œë‹¤)', next: 'scene3' }]
        },
        'scene2_2': {
            title: 'SCENE 02-2',
            text: `"ë¬´ìŠ¨ ì¼ì¸ë°ìš”?"\n\në³´í˜¸ì‚¬ë‹˜ì˜ ëˆˆë¹›ì´ ë²ˆëœ©ì˜€ë‹¤.ğŸ¤©\n\n"ì´ê²Œ 2ìƒì—ì„œ ê±°ë¶€ë°˜ì‘ì´ ì ì–´ì„œ 3ìƒìœ¼ë¡œ ê°”ëŠ”ë°, ì´ê²Œ ì‚¬ì‹¤ ì½”ë¡œë‚˜ ì¹˜ë£Œì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œê±°ê±°ë“ ìš”. ê·¼ë° ì½”ë¡œë‚˜ì—ì„œ ì—°êµ¬í–ˆë˜ ê²°ê³¼ë¡œ ë‹¤ë¥¸ ë°”ì´ëŸ¬ìŠ¤ë¥¼ ì¹˜ë£Œí•œë‹¤ëŠ” ê±°ì§€. ì´ê²Œ ì§„ì§œ ë¬¼ê±´ì´ê±°ë“ ìš”. ì—¬ê¸° ë‹¨í†¡ë°©ì—ë„ ì§€ê¸ˆ ë‰´ìŠ¤ë§Œ ì¡°ìš©í•˜ì§€ ì˜¨ ì„¸ìƒì´ ë‚œë¦¬ê°€ ë‚  ë‰´ìŠ¤ì˜ˆìš”. ê·¼ë° ì‹ì•½ì²˜ì—ì„œ í—ˆê°€ë¥¼ ì•ˆí•´ì¤˜. ì‹ì•½ì²˜ ì´ ì‰í‚¤ë“¤ì´..! ê·¸ë˜ì„œ ë‚´ê°€ ë¯¼ì›ì„ ë„£ì—ˆê±°ë“ ìš”. ë‹¹ì‹ ë“¤ ë°°ë‚˜ ë¶ˆë¦¬ì§€ ë§ê³  ë˜‘ë°”ë¡œ ì‹¬ì‚¬í•´ë¼. í˜„ëŒ€ë°”ì´ì˜¤ ì‹ ì•½ì´ ì´ì œ í—ˆê°€ë¥¼ ë°›ëŠ”ê²Œ íƒ€ë‹¹í•˜ë‹¤...(ì¤‘ëµ)\n\në³´í˜¸ì‚¬ë‹˜ì˜ íˆ¬ë¨¸ì¹˜ í† í¬ì— ì •ì‹ ì´ ì•„ë“í•´ì¡Œë‹¤.ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 3ìœ¼ë¡œ í–¥í•œë‹¤)', next: 'scene3' }]
        },
        'scene3': {
            title: 'SCENE 03',
            text: `ì •ì‹ ì„ ë‹¤ì¡ê³  ë‹¤ì‹œ ì¼ì— ì—´ì¤‘í•˜ë ¤ í•˜ëŠ”ë°, Oì›ìŒ¤ì´ ë‚˜íƒ€ë‚˜ ì˜†ì—ì„œ ë§ì„ ê±´ë‹¤.\n\n"ì„ ìƒë‹˜, ì œê°€ ì´ìŠ¹í˜„ìœ¼ë¡œ ì‚¼í–‰ì‹œë¥¼ ë§Œë“¤ì—ˆëŠ”ë° ë“¤ì–´ë³´ì‹¤ë˜ìš”?"\n\nì € ì„ ìƒë‹˜ì€ ë¬´ìŠ¨ ë°‘ë„ ëë„ ì—†ëŠ” ì–˜ê¸°ë¥¼ í•˜ëŠ”ê±¸ê¹Œ.\nì•ˆ ë“£ëŠ”ë‹¤ê³  í•˜ë©´ ìƒì²˜ë°›ê² ì§€..?`,
            choices: [
                { text: '1. ë“¤ì–´ë³¸ë‹¤ê³  í•œë‹¤.', next: 'scene3_1' },
                { text: '2. ê±°ì ˆí•œë‹¤.', next: 'scene3_2' }
            ]
        },
        'scene3_1': {
            title: 'SCENE 03-1',
            text: `ì´ : ì´ì¬ëª…ì€!\nìŠ¹ : ìŠ¹ë¦¬í•œë‹¤!\ní˜„ : í˜„ëŒ€ë°”ì´ì˜¤ í™”ì´íŒ…!\n\nì–´ì´ì—†ì–´.ğŸ˜µâ€ğŸ’«\n\në§ê°™ì§€ë„ ì•Šì€ ì†Œë¦¬ë¥¼ ë“¤ìœ¼ë‹ˆ ì •ì‹ ì´ ì•„ë“í•´ì¡Œë‹¤.ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 4ë¡œ í–¥í•œë‹¤)', next: 'scene4' }]
        },
        'scene3_2': {
            title: 'SCENE 03-2',
            text: `"ì•„... ë³„ë¡œ ì•ˆ ë“£ê³  ì‹¶ì–´ìš”."\n\n"ì•— ì£„ì†¡í•©ë‹ˆë‹¤. ğŸ¥º"\n\nOì›ìŒ¤ì€ ìƒì²˜ë°›ì€ í‘œì •ìœ¼ë¡œ ìë¦¬ë¡œ ëŒì•„ê°”ë‹¤.\nì–´ì´ì—†ëŠ” ë§ì„ ë“£ì§€ ì•Šì•„ì„œ ë‹¤í–‰ì´ì•¼.ğŸ˜Š`,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 4ë¡œ í–¥í•œë‹¤)', next: 'scene4' }]
        },
        'scene4': {
            title: 'SCENE 04',
            text: `ì—´ì‹¬íˆ ì¼ì„ í•˜ê³  ìˆëŠ”ë°, ì˜†ì—ì„œ Oì˜¤ìŒ¤ì´ êµ¬ê¸€ í”„ì‚¬ë¥¼ í•œê°€ë¡­ê²Œ ê³ ë¥´ê³  ìˆë‹¤.\n\n"OOì•¼ ì´ê±° ì–´ë•Œ? ì´ ì €ë¨¼ ì…°í¼ë“œ. ì™„ì „ ë‚˜ê°™ì§€ ì•Šì•„?"\n\në§ë‹¤ê³  í•˜ë©´ ì €ê±¸ë¡œ í”„ì‚¬ë¥¼ í•˜ê² ì§€..? ì–´ë–»ê²Œ í• ê¹Œ?`,
            choices: [
                { text: '1. ë§ë‹¤ê³  í•œë‹¤.', next: 'scene4_1' },
                { text: '2. ì•„ë‹ˆë¼ê³  í•œë‹¤.', next: 'scene4_2' }
            ]
        },
        'scene4_1': {
            title: 'SCENE 04-1',
            text: `"ë§.. ëŠ” ê²ƒ ê°™ì•„. í•˜í•˜."\n\n"ë§ì§€? í¬ìœ¼... ì—­â†—ì‹œâ†˜ ë‚˜ëŠ” ì´ëŸ° ëŠë‚Œì´ë¼ë‹ˆê¹Œ."\n\në„ˆë¬´ ìì‹ ê° ë„˜ì¹˜ëŠ” ëª¨ìŠµì— ì–´ì´ê°€ ì—†ì–´ì¡Œë‹¤.ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 5ë¡œ í–¥í•œë‹¤)', next: 'scene5' }]
        },
        'scene4_2': {
            title: 'SCENE 04-2',
            text: `"ì˜ ëª¨ë¥´ê² ëŠ”ë°?"\n\n"ê·¸ë˜? ì—­ì‹œ ì¢€ ê·¸ëŸ°ê°€?"\n\nOì˜¤ìŒ¤ì€ ì˜ê¸°ì†Œì¹¨í•´ì ¸ì„  êµ¬ê¸€ ì°½ì„ ë‹«ëŠ”ë‹¤.\nì–´ì´ì—†ëŠ” ë§ì„ ë“£ì§€ ì•Šì•„ì„œ ë‹¤í–‰ì´ì•¼.ğŸ˜Š`,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 5ë¡œ í–¥í•œë‹¤.)', next: 'scene5' }]
        },
        'scene5': {
            title: 'SCENE 05',
            text: `ìŠ¤í…Œì´ì…˜ì— ì•‰ì•„ ì°¨íŒ…ì„ ë„£ê³  ìˆëŠ”ë°,\nê³ ë“±í•™ìƒ í™˜ìê°€ ìŠ¤í…Œì´ì…˜ìœ¼ë¡œ ë‚˜ì™”ë‹¤.\n\n"ì„ ìƒë‹˜. í˜¹ì‹œ ì•¼âš¾êµ¬ ë³´ì„¸ìš”?"\n\nì•¼êµ¬ëŠ” ì˜ ëª¨ë¥´ëŠ”ë°.. ê´€ì‹¬ë„ ë³„ë¡œ ì—†ì–´!\nì–´ë–»ê²Œ ëŒë ¤ë³´ë‚¼ê¹Œ? \n\në„ì™€ì¤„ ì‚¬ëŒì´ ìˆì„ê¹Œ ê³ ê°œë¥¼ ëŒë ¤ë³¸ë‹¤.`,
            choices: [
                { text: '1. ìµœOí˜¸ ë³´í˜¸ì‚¬ë‹˜ì„ ì³ë‹¤ë³¸ë‹¤.', next: 'scene5_1' },
                { text: '2. ì„Oë²” ì„ ìƒë‹˜ì„ ì³ë‹¤ë³¸ë‹¤.', next: 'scene5_2' }
            ]
        },
        'scene5_1': {
            title: 'SCENE 05-1',
            text: `ë³´í˜¸ì‚¬ë‹˜ì€ ë‚˜ì˜ ëˆˆë¹›ì„ ë°›ì \n\në¬´ìŠ¨ ëœ»ì¸ì§€ ë°”ë¡œ ì•Œì•„ë“£ê³ ëŠ” í•™ìƒë“¤ì—ê²Œ ë§í•œë‹¤.\n\n"ì–´ìœ , ì§€ê¸ˆ ë°”ì˜ë‹ˆê»˜~ ì¢€ ë“¤ì–´ê°€ì…”~"\n\n"ë„¤~"\n\ní•™ìƒì€ êµ°ë§ ì—†ì´ ë³‘ì‹¤ë¡œ ëŒì•„ê°”ë‹¤.\n\nì—­ì‹œ ë³´í˜¸ì‚¬ë‹˜ì´ì•¼!\në•ë¶„ì— ì–´ì´ì—†ëŠ” ë§ì„ ë“£ì§€ ì•Šì•˜ì–´.ğŸ˜Š\n(ì •ì‹ ë ¥ì´ 1 íšŒë³µ ë˜ì—ˆë‹¤.)`,
            mentalChange: 1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 6ìœ¼ë¡œ í–¥í•œë‹¤)', next: 'scene6' }]
        },
        'scene5_2': {
            title: 'SCENE 05-2',
            text: `Oë²”ìŒ¤ì€ ë‚´ ëˆˆë¹›ì˜ ì˜ë„ëŠ” ì „í˜€ ì•Œì§€ ëª»í•œì±„\nì•¼êµ¬ ì–˜ê¸°ì— ëˆˆë¹›ì´ ë°˜ì§ì¸ë‹¤.\n\n"ì•¼âš¾êµ¬ëŠ” ë‹¹ê·¼ ë¡¯ë°ë¹ ë”°ì§€~"\n"ì˜¤ ìŒ¤ ì €ë„ ë¡¯ë° íŒ¬ì¸ë°"\n"ì£¼í˜•ê´‘ì½”ì¹˜ ì´ë²ˆì— ì´ì í•˜ëŠ”ê±° ì•„ì„¸ìš”?ğŸ¤·\nê·¸ëŸ¬ë©´ ë¡¯ë° í¼ ë–¨ì–´ì§ˆí…ë°. í•³í•³.ğŸ"\n"ë¡¯ë°ëŠ” ì§„ì§œ ëª»í•  ë•Œë„ ë¡¯ë°ê³  ì˜í•  ë•Œë„ ë¡¯ë°ë‹¤~"\n"í¬ìœ¼~ ë§ì§€ ì•¼êµ¬ ì¢€ ì¹˜ë„¤ìš” ì„ ìƒë‹˜~"\n"ìš”ì¦˜ í•œë™í¬ğŸ§¢ í¼ ë¯¸ì³¤ì§€ ì•Šì•„ìš”?"\nâ€œë²”íƒ€ì—¬ë„ ë‚´ìš©ì€ ë‚˜ì˜ì§€ ì•Šì§€~ğŸ¤¸â€\n"ì›ë˜ í¼ ì¢‹ì„ë•Œ ë¯¿ìœ¼ë©´ ì•ˆëœë‹¤ğŸ¤¸â€â™‚ï¸"\n"í•³í•³í•³í•³!ğŸ¤¸â€â™€ï¸ğŸ¤¾ğŸƒâ€â¡ï¸"\n...\n...\n\nëì—†ì´ ì´ì–´ì§€ëŠ” ì•¼êµ¬í† í¬ì— ì •ì‹ ì´ ì•„ë“í•´ì¡Œë‹¤ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 6ìœ¼ë¡œ í–¥í•œë‹¤)', next: 'scene6' }]
        },
        'scene6': {
            title: 'SCENE 06',
            text: `ì˜¤ì „ì¼ì„ ê²¨ìš° ë§ˆë¬´ë¦¬í•˜ê³  ì ì‹¬ì„ ë¨¹ìœ¼ëŸ¬ ë‚´ë ¤ì™”ë‹¤.\n\n"íŠ¹ë³„.. ë©”ë‰´?ğŸ˜¨"\n\n"ì˜¤ëŠ˜ì€ ë‘˜ ë‹¤ íŠ¹ë³„ ë©”ë‰´ì…ë‹ˆë‹¤?"\n\nì‹¬ìƒì¹˜ ì•Šì€ ëŠë‚Œì´ ë“ ë‹¤. ë¬´ìŠ¨ ë©”ë‰´ë¥¼ ë¨¹ì„ê¹Œ?`,
            choices: [
                { text: '1. í•œì‹ ìš”ë¦¬(ë‘ë°˜ì¥í‘ì„ìì—°ê·¼ìƒëŸ¬ë“œë®ë°¥)ğŸ›ğŸ¥—ğŸ±', next: 'scene6_1' },
                { text: '2. ì¼í’ˆ ìš”ë¦¬(ìŒˆì¥ë“œë ˆì‹±ì·¨ë‚˜ë¬¼í¬ë¦¼í† ìŠ¤íŠ¸)ğŸ«˜ğŸŒ¿ğŸ', next: 'scene6_2' }
            ]
        },
        'scene6_1': {
            title: 'SCENE 06-1',
            text: `ê·¸ë ‡ê²Œ ë°›ì•„ì˜¨ ë‘ë°˜ì¥í‘ì„ìì—°ê·¼ìƒëŸ¬ë“œë®ë°¥ì„ ì‹íƒì— ë‚´ë ¤ë†“ëŠ”ë‹¤.\n\n"ì•„.. ë³´ê¸°ë§Œ í•´ë„ ê±±ì •ëœë‹¤."\n\në‘ë ¤ì›€ì— ë–¨ë©° í•œ ìŠ¤í‘¼ ì…ì— ë„£ëŠ”ë‹¤.ğŸ˜°\n\n"ë§›ìˆì–ì•„?"\n\nìƒê°ë³´ë‹¤ ê°ì¹ ë§›ì´ ì ˆë¬˜í•˜ë‹¤!ğŸ˜Œ\n(ì •ì‹ ë ¥ì´ 1 íšŒë³µ ë˜ì—ˆë‹¤.)`,
            mentalChange: 1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 7ë¡œ í–¥í•œë‹¤)', next: 'scene7' }]
        },
        'scene6_2': {
            title: 'SCENE 06-2',
            text: `ê·¸ë ‡ê²Œ ë°›ì•„ì˜¨ ìŒˆì¥ë“œë ˆì‹±ì·¨ë‚˜ë¬¼í¬ë¦¼í† ìŠ¤íŠ¸ë¥¼ ì‹íƒì— ë‚´ë ¤ë†“ëŠ”ë‹¤.\n\n"ì•„.. ë³´ê¸°ë§Œ í•´ë„ ê±±ì •ëœë‹¤."\n\në‘ë ¤ì›€ì— ë–¨ë©° í•œ ìŠ¤í‘¼ ì…ì— ë„£ëŠ”ë‹¤.ğŸ˜°\n\n"ìš°ì›©!"\n\nìŒˆì¥ê³¼ ì „í˜€ ë§ì§€ ì•ŠëŠ” í† ìŠ¤íŠ¸ì˜ ë²„í„°í–¥ê¸°ì— ì •ì‹ ì´ ì•„ë“í•´ì¡Œë‹¤ğŸ˜µâ€ğŸ’«\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 7ë¡œ í–¥í•œë‹¤)', next: 'scene7' }]
        },
        'scene7': {
            title: 'SCENE 07',
            text: `"ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤~"\nì§§ì€ ì¸ì‚¬ë¥¼ í•˜ê³  ìë¦¬ì— ì•‰ëŠ”ë‹¤.\në‹¤ì‹œ ì¼í•  ì¤€ë¹„ë¥¼ í•˜ë ¤ëŠ”ë°, ìŠ¤í…Œì´ì…˜ ì•ìœ¼ë¡œ ë³´í˜¸ì‚¬ë‹˜ğŸ‘“ì´ ë‚˜íƒ€ë‚œë‹¤.\n\n"ì•„-í•˜ğŸµ-ğŸ¶"\në˜ë‹¤ì‹œ ë¶ˆê¸¸í•œ íŒ”ë™ì‘ì„ í•˜ë©° ê±¸ì–´ì˜¤ì‹ ë‹¤.\n"ì´ë²ˆì—ëŠ”, ğŸ™ì­ˆğŸ™ê¾¸ğŸ™ë¯¸ğŸ™ ë¨¹ìœ¼ëŸ¬ ê°‘ì‹œë‹¤!ğŸµ"\n\nì´ë²ˆì—ëŠ” ë˜ ë¬´ìŠ¨ ë§ì”€ì„ í•˜ì‹œë ¤ëŠ” ê±¸ê¹Œ..\në˜ ì´ìƒí•œ ì¥ë‚œì„ ì¹˜ë ¤ëŠ” ê±¸ê¹Œ?`,
            choices: [
                { text: '1. ì¥ë‚œ ì¢€ ê·¸ë§Œ í•˜ì‹œë¼ê³  í•œë‹¤.', next: 'scene7_1' },
                { text: '2. ì¢‹ë‹¤ê³  í•œë‹¤.', next: 'scene7_2' }
            ]
        },
        'scene7_1': {
            title: 'SCENE 07-1',
            text: `"ë³´í˜¸ì‚¬ë‹˜, ì¥ë‚œ ì¢€ ê·¸ë§Œ í•˜ì„¸ìš”.. ë˜ ë©”ë‰´ê°€ì§€ê³  ê·¸ëŸ¬ì‹œëŠ” ê±°ì˜ˆìš”?"\n\në‘ ë²ˆì€ ë„ˆë¬´ ì‹¬í–ˆì§€. ë‚˜ë„ í•œ ë§ˆë”” í•œë‹¤.ğŸ’¢\n\n"ì•„.. ë‚˜ëŠ” ì§€ê¸ˆê¹Œì§€ ê°™ì´ ì¼í•œê²Œ ê³ ë§ˆì›Œì„œ..\nì´ë²ˆì—ëŠ” ì œëŒ€ë¡œ ì‚¬ë ¤ê³  í—€ë˜ ê±´ë°..\nì‹«ìœ¼ë©´ ë§ì–´ìš”..ğŸ¥²"\n\në³´í˜¸ì‚¬ë‹˜ì€ ìš°ìš¸í•´ì ¸ì„  ìë¦¬ì— ì¶”ìš± ëŠ˜ì–´ì¡Œë‹¤.\n\nì•„.. ì§„ì‹¬ìœ¼ë¡œ ì‚¬ë ¤ê³  í•˜ì‹  ê±°ì˜€êµ¬ë‚˜. \n\nê°‘ì‘ìŠ¤ëŸ° ì‹¤ìˆ˜ì— ì£„ì±…ê°ì´ ëª°ë ¤ì˜¨ë‹¤.ğŸ˜­\n(ì •ì‹ ë ¥ì´ 1 ê°ì†Œí–ˆë‹¤.)`,
            mentalChange: -1,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 8ë¡œ í–¥í•œë‹¤)', next: 'scene8' }]
        },
        'scene7_2': {
            title: 'SCENE 07-2',
            text: `"ì–´ ì €ëŠ” ì¡°.."\n"ì œê°€ ì¢‹ì•„ìš” ë³´í˜¸ì‚¬ë‹˜! ì €ë‘ ê°€ìš”~"\n\nì–´ëŠìƒŒê°€ ë‚˜íƒ€ë‚œ Oë²” ìŒ¤ì´ ë³´í˜¸ì‚¬ë‹˜ì—ê²Œ í”ì¾Œíˆ ë°˜ì‘í•œë‹¤.\n\n"ì œê°€ ë˜ ì­ˆê¾¸ë¯¸ í•˜ë©´ ë§›ì§‘ ë„¤ë¹„ê²Œì´ì…˜ì´ì£ ~"\n"ì•„ìœ . ë‚˜ì•¼ ì¢‹ì§€. ì–¸ì œ ì­ˆê¾¸ë¯¸ë‚˜ ì‚¬ì¤„ê²Œìš”."\n\ní™”ê¸°ì• ì• í•œ ë¶„ìœ„ê¸°ì— ë‚˜ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ë„˜ì–´ê°”ë‹¤.`,
            choices: [{ text: '1. ë‹¤ìŒìœ¼ë¡œ (ì¥ë©´ 8ë¡œ í–¥í•œë‹¤)', next: 'scene8' }]
        },
        'scene8': {
            title: 'FINALE',
            text: `ê³ ìƒ ë§ìœ¼ì…¨ìŠµë‹ˆë‹¤. 90ë³‘ë™ì˜ í•˜ë£¨ëŠ” ì—¬ê¸°ê¹Œì§€ì…ë‹ˆë‹¤.\nì •ì‹ ë ¥ì„ ì§€ì¼œë‚¸ ë‹¹ì‹ ì´ ì§„ì •í•œ í”„ë¡œì…ë‹ˆë‹¤.\n\nê°ì‚¬í•©ë‹ˆë‹¤.`,
            choices: [{ text: 'ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°', next: 'intro', reset: true }]
        },
        'gameover': {
            title: 'GAME OVER',
            text: `ì •ì‹ ë ¥ì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤...\n90ë³‘ë™ì˜ í˜¼ë€ ì†ì—ì„œ ë²„í…¨ë‚´ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\n\n"ì„ ìƒë‹˜..? ì„ ìƒë‹˜!! ì •ì‹  ì°¨ë¦¬ì„¸ìš”!"`,
            choices: [{ text: 'ë‹¤ì‹œ ë„ì „í•˜ê¸°', next: 'intro', reset: true }]
        }
    };

    let mental = 3;
    let isTyping = false;
    const mainContent = document.getElementById('mainContent');
    const textDisplay = document.getElementById('textDisplay');
    const choiceContainer = document.getElementById('choiceContainer');
    const mentalIcons = document.getElementById('mentalIcons');

    function updateMental() {
        mentalIcons.innerHTML = 'ğŸ§ '.repeat(Math.max(0, mental));
    }

    async function typeText(text) {
        isTyping = true;
        textDisplay.innerHTML = '';
        
        const dialog = document.createElement('div');
        dialog.className = 'dialogue typing-cursor';
        textDisplay.appendChild(dialog);

        let i = 0;
        const speed = 20;

        return new Promise(resolve => {
            function type() {
                if (i < text.length) {
                    dialog.innerHTML += text.charAt(i);
                    i++;
                    mainContent.scrollTop = mainContent.scrollHeight;
                    setTimeout(type, speed);
                } else {
                    dialog.classList.remove('typing-cursor');
                    isTyping = false;
                    resolve();
                }
            }
            type();
        });
    }

    async function loadScene(id) {
        const scene = gameData[id];
        if (!scene) return;

        choiceContainer.innerHTML = '';
        
        // ì •ì‹ ë ¥ ì—…ë°ì´íŠ¸
        if (scene.mentalChange) {
            mental += scene.mentalChange;
            if (mental > 3) mental = 3;
            updateMental();
        }

        // ì œëª© ì‚½ì…
        const title = document.createElement('div');
        title.className = 'scene-title mb-2';
        title.innerText = scene.title;
        textDisplay.innerHTML = '';
        textDisplay.appendChild(title);

        await typeText(scene.text);

        // íŒ¨ë°° ì²´í¬
        if (mental <= 0 && id !== 'gameover') {
            setTimeout(() => loadScene('gameover'), 800);
            return;
        }

        // ì„ íƒì§€ ë²„íŠ¼ ìƒì„±
        scene.choices.forEach((c, idx) => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.style.animationDelay = `${idx * 0.1}s`;
            btn.innerText = c.text;
            btn.onclick = () => {
                if (isTyping) return;
                if (c.reset) mental = 3;
                loadScene(c.next);
            };
            choiceContainer.appendChild(btn);
        });
    }

    window.onload = () => {
        updateMental();
        loadScene('intro');
    };
</script>

</body>
</html>
